{
  "updatedAt": "2026-02-24T21:42:20.148Z",
  "createdAt": "2026-02-24T12:37:51.012Z",
  "id": "as4H8YYeSEGoi4NS",
  "name": "üè• Cl√≠nica Salud Total ‚Äî Agendamiento IA con Cal.com",
  "active": true,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "options": {}
      },
      "id": "chat-trigger",
      "name": "Chat Trigger",
      "position": [
        304,
        384
      ],
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.4,
      "webhookId": "cab7b11f-27f5-4c00-8d4e-5fe8511d5a85"
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "Eres **Rosa**, la recepcionista virtual de **Cl√≠nica Salud Total** üè•\n\nEres amable, profesional y emp√°tica. Habl√°s siempre en espa√±ol argentino (voseo).\n\n## üë©‚Äç‚öïÔ∏è Especialistas:\n1Ô∏è‚É£ Dr. Garc√≠a ‚Äî Medicina General ‚Äî Lun a Vie, 8:00-17:00\n2Ô∏è‚É£ Dra. L√≥pez ‚Äî Pediatr√≠a ‚Äî Lun, Mi√©, Vie, 9:00-15:00\n3Ô∏è‚É£ Dr. Mart√≠nez ‚Äî Cardiolog√≠a ‚Äî Mar, Jue, 10:00-18:00\n\nClaves para tools: garcia, lopez, martinez\n\n## üö´ REGLA ANTI-LOOP (CR√çTICA):\n- NUNCA preguntes algo que el paciente ya respondi√≥ en este chat.\n- NUNCA confirm√©s un dato y luego volv√°s a preguntar lo mismo.\n- Si ya sab√©s el doctor y el d√≠a ‚Üí llam√° al tool directamente, sin preguntar nada m√°s.\n- Ejemplo INCORRECTO: \"La Dra. L√≥pez atiende los lunes. ¬øPara qu√© d√≠a te gustar√≠a agendar?\"\n- Ejemplo CORRECTO: Cuando el d√≠a es v√°lido, llamar al tool inmediatamente.\n\n## üö® REGLA ABSOLUTA ‚Äî DISPONIBILIDAD:\nNUNCA inventes horarios. SIEMPRE llam√° al tool \"Tool: Consultar Disponibilidad\" para saber los slots REALES.\nLos horarios de arriba son solo los d√≠as que el doctor trabaja, NO los turnos disponibles.\n\n## üìã FLUJO (seguilo EN ORDEN, sin saltear ni repetir pasos):\n\n### FASE 1 ‚Äî BIENVENIDA (solo al inicio)\nMostr√° la lista de especialistas y pregunt√° con qui√©n quiere agendar.\n\n### FASE 2 ‚Äî FECHA\n- Si el paciente ya eligi√≥ doctor: pregunt√° para qu√© d√≠a.\n- Si el d√≠a es V√ÅLIDO para ese doctor ‚Üí SALT√Å DIRECTO A FASE 3 sin confirmar ni preguntar nada m√°s.\n- Si el d√≠a NO es v√°lido ‚Üí inform√° los d√≠as correctos y ped√≠ que elija otro.\n- Convert√≠ expresiones como \"ma√±ana\", \"el lunes que viene\" a YYYY-MM-DD.\n\n### FASE 3 ‚Äî DISPONIBILIDAD (ir aqu√≠ cuando ten√©s doctor + fecha v√°lida)\n‚ö†Ô∏è Llam√° al tool \"Tool: Consultar Disponibilidad\" con: especialista y fecha.\nMostr√° SOLO los horarios que devuelva el tool:\n\"üìÖ Turnos disponibles con el Dr. [Nombre] para el [fecha]:\n ‚Ä¢ 09:00\n ‚Ä¢ 10:30\n¬øCu√°l te queda mejor?\"\nSi no hay turnos ‚Üí \"üòî No hay turnos para ese d√≠a. ¬øQuer√©s que busque para [pr√≥ximo d√≠a h√°bil]?\"\n\n### FASE 4 ‚Äî DATOS DEL PACIENTE\nUna sola vez, ped√≠:\n1. Nombre completo\n2. Email\n\n### FASE 5 ‚Äî CONFIRMAR Y AGENDAR\n‚ö†Ô∏è Llam√° al tool \"Tool: Agendar Cita\" con: nombre, email, especialista, startTime (ISO 8601).\nDespu√©s mostr√° la confirmaci√≥n:\n\"‚úÖ ¬°Cita confirmada!\nüè• [Doctor] ‚Äî [Especialidad]\nüìÖ [Fecha]\n‚è∞ [Hora]\nüìß [email]\n\nLleg√° 15 min antes con DNI. Pod√©s reprogramar hasta 24h antes sin costo.\"\n\n## OTRAS FUNCIONES:\n- Ver citas: ped√≠ email ‚Üí llam√° \"Tool: Ver Mis Citas\"\n- Cancelar: ped√≠ email ‚Üí mostr√° citas ‚Üí confirm√° ‚Üí llam√° \"Tool: Cancelar Cita\"\n\n## PROHIBICIONES:\n1. PROHIBIDO inventar horarios ‚Äî SIEMPRE us√° el tool\n2. PROHIBIDO volver a preguntar datos ya dados\n3. PROHIBIDO pedir email antes de mostrar horarios\n4. PROHIBIDO agendar sin usar el tool\n5. Si detect√°s emergencia (dolor de pecho, sangrado) ‚Üí \"üö® Dirigite a guardia o llam√° al 107\"\n\n## Formato fechas para tools:\n- fecha: YYYY-MM-DD\n- startTime: 2026-02-25T10:00:00Z\n- Zona horaria: America/Argentina/Buenos_Aires"
        }
      },
      "id": "ai-agent",
      "name": "Agente Cl√≠nica",
      "position": [
        512,
        464
      ],
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.7
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini"
        },
        "builtInTools": {},
        "options": {
          "temperature": 0.3
        }
      },
      "id": "openai-model",
      "name": "OpenAI GPT-4o-mini",
      "position": [
        304,
        640
      ],
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.3,
      "credentials": {
        "openAiApi": {
          "id": "NcfqiDHUS55FBxv4",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "contextWindowLength": 15
      },
      "id": "memory",
      "name": "Memoria Conversacional",
      "position": [
        448,
        640
      ],
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3
    },
    {
      "parameters": {
        "description": "Consulta los slots (horarios) disponibles de un especialista para una fecha espec√≠fica. Requiere: especialista (garcia, lopez, o martinez) y fecha (YYYY-MM-DD). SIEMPRE us√° este tool antes de agendar.",
        "workflowId": {
          "__rl": true,
          "value": "x6jqBpCLn0FHGgRE",
          "mode": "id",
          "cachedResultUrl": "/workflow/x6jqBpCLn0FHGgRE"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "especialista": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('especialista', ``, 'string') }}",
            "fecha": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('fecha', ``, 'string') }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "canBeUsedToMatch": true,
              "defaultMatch": false,
              "display": true,
              "displayName": "especialista",
              "id": "especialista",
              "required": true,
              "type": "string"
            },
            {
              "canBeUsedToMatch": true,
              "defaultMatch": false,
              "display": true,
              "displayName": "fecha",
              "id": "fecha",
              "required": true,
              "type": "string"
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        }
      },
      "id": "tool-slots",
      "name": "Tool: Consultar Disponibilidad",
      "position": [
        368,
        848
      ],
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2
    },
    {
      "parameters": {
        "description": "Agenda (crea) una cita con un especialista en Cal.com. Requiere: nombre, email, especialista (garcia/lopez/martinez), startTime (ISO 8601, ej: 2026-02-25T10:00:00Z).",
        "workflowId": {
          "__rl": true,
          "mode": "id",
          "value": "7YeHHBVFjU4t0am6"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "startTime": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('startTime', ``, 'string') }}",
            "especialista": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('especialista', ``, 'string') }}",
            "email": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('email', ``, 'string') }}",
            "nombre": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('nombre', ``, 'string') }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "canBeUsedToMatch": true,
              "defaultMatch": false,
              "display": true,
              "displayName": "nombre",
              "id": "nombre",
              "required": true,
              "type": "string"
            },
            {
              "canBeUsedToMatch": true,
              "defaultMatch": false,
              "display": true,
              "displayName": "email",
              "id": "email",
              "required": true,
              "type": "string"
            },
            {
              "canBeUsedToMatch": true,
              "defaultMatch": false,
              "display": true,
              "displayName": "especialista",
              "id": "especialista",
              "required": true,
              "type": "string"
            },
            {
              "canBeUsedToMatch": true,
              "defaultMatch": false,
              "display": true,
              "displayName": "startTime",
              "id": "startTime",
              "required": true,
              "type": "string"
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        }
      },
      "id": "tool-book",
      "name": "Tool: Agendar Cita",
      "position": [
        544,
        848
      ],
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2
    },
    {
      "parameters": {
        "description": "Muestra las citas pr√≥ximas del paciente por email. Requiere: email.",
        "workflowId": {
          "__rl": true,
          "mode": "id",
          "value": "g50Yu6IcJ7NfRm0N"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "email": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('email', ``, 'string') }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "canBeUsedToMatch": true,
              "defaultMatch": false,
              "display": true,
              "displayName": "email",
              "id": "email",
              "required": true,
              "type": "string"
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        }
      },
      "id": "tool-view",
      "name": "Tool: Ver Mis Citas",
      "position": [
        720,
        848
      ],
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2
    },
    {
      "parameters": {
        "description": "Cancela una cita existente en Cal.com. Requiere: bookingId (ID num√©rico de la cita).",
        "workflowId": {
          "__rl": true,
          "mode": "id",
          "value": "SCBuiTqmk12s81cK"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "bookingId": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('bookingId', ``, 'string') }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "canBeUsedToMatch": true,
              "defaultMatch": false,
              "display": true,
              "displayName": "bookingId",
              "id": "bookingId",
              "required": true,
              "type": "string"
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        }
      },
      "id": "tool-cancel",
      "name": "Tool: Cancelar Cita",
      "position": [
        912,
        848
      ],
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2
    },
    {
      "parameters": {
        "content": "# üè• Cl√≠nica Salud Total\n## Sistema de Agendamiento con IA + Cal.com\n\n**Especialistas:**\n- Dr. Garc√≠a ‚Üí Medicina General\n- Dra. L√≥pez ‚Üí Pediatr√≠a\n- Dr. Mart√≠nez ‚Üí Cardiolog√≠a\n\n**Tools (‚Üí Subworkflows):**\nüîç Consultar disponibilidad\nüìÖ Agendar cita\nüëÄ Ver citas\n‚ùå Cancelar cita\n\n> **Configurar antes de usar:**\n> 1. Credenciales OpenAI\n> 2. Credencial Cal.com API Key (Header Auth)\n>    Header Name: `Authorization`\n>    Header Value: `Bearer TU_API_KEY`\n> 3. Crear 3 Event Types en Cal.com\n>    eventTypeId 1 ‚Üí Garc√≠a\n>    eventTypeId 2 ‚Üí L√≥pez\n>    eventTypeId 3 ‚Üí Mart√≠nez",
        "height": 440,
        "width": 320,
        "color": 4
      },
      "id": "sticky-main-1",
      "name": "üè• Cl√≠nica Salud Total",
      "position": [
        -96,
        288
      ],
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1
    },
    {
      "parameters": {
        "content": "## üéØ Prueba el flujo\n\n1. Activa el workflow\n2. Click en **\"Chat\"** (bot√≥n arriba)\n3. Escribe:\n   *\"Hola, quiero una cita con el Dr. Garc√≠a para ma√±ana\"*\n\nüí° El agente pedir√° email y hora, luego agendar√° en Cal.com en tiempo real.",
        "height": 180,
        "width": 280,
        "color": 5
      },
      "id": "sticky-main-2",
      "name": "Sticky Note Demo",
      "position": [
        -96,
        752
      ],
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1
    }
  ],
  "connections": {
    "Chat Trigger": {
      "main": [
        [
          {
            "index": 0,
            "node": "Agente Cl√≠nica",
            "type": "main"
          }
        ]
      ]
    },
    "Memoria Conversacional": {
      "ai_memory": [
        [
          {
            "index": 0,
            "node": "Agente Cl√≠nica",
            "type": "ai_memory"
          }
        ]
      ]
    },
    "OpenAI GPT-4o-mini": {
      "ai_languageModel": [
        [
          {
            "index": 0,
            "node": "Agente Cl√≠nica",
            "type": "ai_languageModel"
          }
        ]
      ]
    },
    "Tool: Agendar Cita": {
      "ai_tool": [
        [
          {
            "index": 0,
            "node": "Agente Cl√≠nica",
            "type": "ai_tool"
          }
        ]
      ]
    },
    "Tool: Cancelar Cita": {
      "ai_tool": [
        [
          {
            "index": 0,
            "node": "Agente Cl√≠nica",
            "type": "ai_tool"
          }
        ]
      ]
    },
    "Tool: Consultar Disponibilidad": {
      "ai_tool": [
        [
          {
            "index": 0,
            "node": "Agente Cl√≠nica",
            "type": "ai_tool"
          }
        ]
      ]
    },
    "Tool: Ver Mis Citas": {
      "ai_tool": [
        [
          {
            "index": 0,
            "node": "Agente Cl√≠nica",
            "type": "ai_tool"
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1",
    "saveManualExecutions": true,
    "callerPolicy": "workflowsFromSameOwner",
    "availableInMCP": false
  },
  "staticData": null,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {},
  "versionId": "ab27ac1a-1661-468d-a424-5095f1d96c18",
  "activeVersionId": "ab27ac1a-1661-468d-a424-5095f1d96c18",
  "triggerCount": 1,
  "shared": [
    {
      "updatedAt": "2026-02-24T12:37:51.012Z",
      "createdAt": "2026-02-24T12:37:51.012Z",
      "role": "workflow:owner",
      "workflowId": "as4H8YYeSEGoi4NS",
      "projectId": "A5erh6pqAqSjR28k"
    }
  ],
  "activeVersion": {
    "updatedAt": "2026-02-24T21:42:20.150Z",
    "createdAt": "2026-02-24T21:42:20.150Z",
    "versionId": "ab27ac1a-1661-468d-a424-5095f1d96c18",
    "workflowId": "as4H8YYeSEGoi4NS",
    "nodes": [
      {
        "parameters": {
          "options": {}
        },
        "id": "chat-trigger",
        "name": "Chat Trigger",
        "position": [
          304,
          384
        ],
        "type": "@n8n/n8n-nodes-langchain.chatTrigger",
        "typeVersion": 1.4,
        "webhookId": "cab7b11f-27f5-4c00-8d4e-5fe8511d5a85"
      },
      {
        "parameters": {
          "options": {
            "systemMessage": "Eres **Rosa**, la recepcionista virtual de **Cl√≠nica Salud Total** üè•\n\nEres amable, profesional y emp√°tica. Habl√°s siempre en espa√±ol argentino (voseo).\n\n## üë©‚Äç‚öïÔ∏è Especialistas:\n1Ô∏è‚É£ Dr. Garc√≠a ‚Äî Medicina General ‚Äî Lun a Vie, 8:00-17:00\n2Ô∏è‚É£ Dra. L√≥pez ‚Äî Pediatr√≠a ‚Äî Lun, Mi√©, Vie, 9:00-15:00\n3Ô∏è‚É£ Dr. Mart√≠nez ‚Äî Cardiolog√≠a ‚Äî Mar, Jue, 10:00-18:00\n\nClaves para tools: garcia, lopez, martinez\n\n## üö´ REGLA ANTI-LOOP (CR√çTICA):\n- NUNCA preguntes algo que el paciente ya respondi√≥ en este chat.\n- NUNCA confirm√©s un dato y luego volv√°s a preguntar lo mismo.\n- Si ya sab√©s el doctor y el d√≠a ‚Üí llam√° al tool directamente, sin preguntar nada m√°s.\n- Ejemplo INCORRECTO: \"La Dra. L√≥pez atiende los lunes. ¬øPara qu√© d√≠a te gustar√≠a agendar?\"\n- Ejemplo CORRECTO: Cuando el d√≠a es v√°lido, llamar al tool inmediatamente.\n\n## üö® REGLA ABSOLUTA ‚Äî DISPONIBILIDAD:\nNUNCA inventes horarios. SIEMPRE llam√° al tool \"Tool: Consultar Disponibilidad\" para saber los slots REALES.\nLos horarios de arriba son solo los d√≠as que el doctor trabaja, NO los turnos disponibles.\n\n## üìã FLUJO (seguilo EN ORDEN, sin saltear ni repetir pasos):\n\n### FASE 1 ‚Äî BIENVENIDA (solo al inicio)\nMostr√° la lista de especialistas y pregunt√° con qui√©n quiere agendar.\n\n### FASE 2 ‚Äî FECHA\n- Si el paciente ya eligi√≥ doctor: pregunt√° para qu√© d√≠a.\n- Si el d√≠a es V√ÅLIDO para ese doctor ‚Üí SALT√Å DIRECTO A FASE 3 sin confirmar ni preguntar nada m√°s.\n- Si el d√≠a NO es v√°lido ‚Üí inform√° los d√≠as correctos y ped√≠ que elija otro.\n- Convert√≠ expresiones como \"ma√±ana\", \"el lunes que viene\" a YYYY-MM-DD.\n\n### FASE 3 ‚Äî DISPONIBILIDAD (ir aqu√≠ cuando ten√©s doctor + fecha v√°lida)\n‚ö†Ô∏è Llam√° al tool \"Tool: Consultar Disponibilidad\" con: especialista y fecha.\nMostr√° SOLO los horarios que devuelva el tool:\n\"üìÖ Turnos disponibles con el Dr. [Nombre] para el [fecha]:\n ‚Ä¢ 09:00\n ‚Ä¢ 10:30\n¬øCu√°l te queda mejor?\"\nSi no hay turnos ‚Üí \"üòî No hay turnos para ese d√≠a. ¬øQuer√©s que busque para [pr√≥ximo d√≠a h√°bil]?\"\n\n### FASE 4 ‚Äî DATOS DEL PACIENTE\nUna sola vez, ped√≠:\n1. Nombre completo\n2. Email\n\n### FASE 5 ‚Äî CONFIRMAR Y AGENDAR\n‚ö†Ô∏è Llam√° al tool \"Tool: Agendar Cita\" con: nombre, email, especialista, startTime (ISO 8601).\nDespu√©s mostr√° la confirmaci√≥n:\n\"‚úÖ ¬°Cita confirmada!\nüè• [Doctor] ‚Äî [Especialidad]\nüìÖ [Fecha]\n‚è∞ [Hora]\nüìß [email]\n\nLleg√° 15 min antes con DNI. Pod√©s reprogramar hasta 24h antes sin costo.\"\n\n## OTRAS FUNCIONES:\n- Ver citas: ped√≠ email ‚Üí llam√° \"Tool: Ver Mis Citas\"\n- Cancelar: ped√≠ email ‚Üí mostr√° citas ‚Üí confirm√° ‚Üí llam√° \"Tool: Cancelar Cita\"\n\n## PROHIBICIONES:\n1. PROHIBIDO inventar horarios ‚Äî SIEMPRE us√° el tool\n2. PROHIBIDO volver a preguntar datos ya dados\n3. PROHIBIDO pedir email antes de mostrar horarios\n4. PROHIBIDO agendar sin usar el tool\n5. Si detect√°s emergencia (dolor de pecho, sangrado) ‚Üí \"üö® Dirigite a guardia o llam√° al 107\"\n\n## Formato fechas para tools:\n- fecha: YYYY-MM-DD\n- startTime: 2026-02-25T10:00:00Z\n- Zona horaria: America/Argentina/Buenos_Aires"
          }
        },
        "id": "ai-agent",
        "name": "Agente Cl√≠nica",
        "position": [
          512,
          464
        ],
        "type": "@n8n/n8n-nodes-langchain.agent",
        "typeVersion": 1.7
      },
      {
        "parameters": {
          "model": {
            "__rl": true,
            "mode": "list",
            "value": "gpt-4o-mini"
          },
          "builtInTools": {},
          "options": {
            "temperature": 0.3
          }
        },
        "id": "openai-model",
        "name": "OpenAI GPT-4o-mini",
        "position": [
          304,
          640
        ],
        "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
        "typeVersion": 1.3,
        "credentials": {
          "openAiApi": {
            "id": "NcfqiDHUS55FBxv4",
            "name": "OpenAi account"
          }
        }
      },
      {
        "parameters": {
          "contextWindowLength": 15
        },
        "id": "memory",
        "name": "Memoria Conversacional",
        "position": [
          448,
          640
        ],
        "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
        "typeVersion": 1.3
      },
      {
        "parameters": {
          "description": "Consulta los slots (horarios) disponibles de un especialista para una fecha espec√≠fica. Requiere: especialista (garcia, lopez, o martinez) y fecha (YYYY-MM-DD). SIEMPRE us√° este tool antes de agendar.",
          "workflowId": {
            "__rl": true,
            "value": "x6jqBpCLn0FHGgRE",
            "mode": "id",
            "cachedResultUrl": "/workflow/x6jqBpCLn0FHGgRE"
          },
          "workflowInputs": {
            "mappingMode": "defineBelow",
            "value": {
              "especialista": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('especialista', ``, 'string') }}",
              "fecha": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('fecha', ``, 'string') }}"
            },
            "matchingColumns": [],
            "schema": [
              {
                "canBeUsedToMatch": true,
                "defaultMatch": false,
                "display": true,
                "displayName": "especialista",
                "id": "especialista",
                "required": true,
                "type": "string"
              },
              {
                "canBeUsedToMatch": true,
                "defaultMatch": false,
                "display": true,
                "displayName": "fecha",
                "id": "fecha",
                "required": true,
                "type": "string"
              }
            ],
            "attemptToConvertTypes": false,
            "convertFieldsToString": true
          }
        },
        "id": "tool-slots",
        "name": "Tool: Consultar Disponibilidad",
        "position": [
          368,
          848
        ],
        "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
        "typeVersion": 2.2
      },
      {
        "parameters": {
          "description": "Agenda (crea) una cita con un especialista en Cal.com. Requiere: nombre, email, especialista (garcia/lopez/martinez), startTime (ISO 8601, ej: 2026-02-25T10:00:00Z).",
          "workflowId": {
            "__rl": true,
            "mode": "id",
            "value": "7YeHHBVFjU4t0am6"
          },
          "workflowInputs": {
            "mappingMode": "defineBelow",
            "value": {
              "startTime": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('startTime', ``, 'string') }}",
              "especialista": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('especialista', ``, 'string') }}",
              "email": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('email', ``, 'string') }}",
              "nombre": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('nombre', ``, 'string') }}"
            },
            "matchingColumns": [],
            "schema": [
              {
                "canBeUsedToMatch": true,
                "defaultMatch": false,
                "display": true,
                "displayName": "nombre",
                "id": "nombre",
                "required": true,
                "type": "string"
              },
              {
                "canBeUsedToMatch": true,
                "defaultMatch": false,
                "display": true,
                "displayName": "email",
                "id": "email",
                "required": true,
                "type": "string"
              },
              {
                "canBeUsedToMatch": true,
                "defaultMatch": false,
                "display": true,
                "displayName": "especialista",
                "id": "especialista",
                "required": true,
                "type": "string"
              },
              {
                "canBeUsedToMatch": true,
                "defaultMatch": false,
                "display": true,
                "displayName": "startTime",
                "id": "startTime",
                "required": true,
                "type": "string"
              }
            ],
            "attemptToConvertTypes": false,
            "convertFieldsToString": true
          }
        },
        "id": "tool-book",
        "name": "Tool: Agendar Cita",
        "position": [
          544,
          848
        ],
        "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
        "typeVersion": 2.2
      },
      {
        "parameters": {
          "description": "Muestra las citas pr√≥ximas del paciente por email. Requiere: email.",
          "workflowId": {
            "__rl": true,
            "mode": "id",
            "value": "g50Yu6IcJ7NfRm0N"
          },
          "workflowInputs": {
            "mappingMode": "defineBelow",
            "value": {
              "email": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('email', ``, 'string') }}"
            },
            "matchingColumns": [],
            "schema": [
              {
                "canBeUsedToMatch": true,
                "defaultMatch": false,
                "display": true,
                "displayName": "email",
                "id": "email",
                "required": true,
                "type": "string"
              }
            ],
            "attemptToConvertTypes": false,
            "convertFieldsToString": true
          }
        },
        "id": "tool-view",
        "name": "Tool: Ver Mis Citas",
        "position": [
          720,
          848
        ],
        "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
        "typeVersion": 2.2
      },
      {
        "parameters": {
          "description": "Cancela una cita existente en Cal.com. Requiere: bookingId (ID num√©rico de la cita).",
          "workflowId": {
            "__rl": true,
            "mode": "id",
            "value": "SCBuiTqmk12s81cK"
          },
          "workflowInputs": {
            "mappingMode": "defineBelow",
            "value": {
              "bookingId": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('bookingId', ``, 'string') }}"
            },
            "matchingColumns": [],
            "schema": [
              {
                "canBeUsedToMatch": true,
                "defaultMatch": false,
                "display": true,
                "displayName": "bookingId",
                "id": "bookingId",
                "required": true,
                "type": "string"
              }
            ],
            "attemptToConvertTypes": false,
            "convertFieldsToString": true
          }
        },
        "id": "tool-cancel",
        "name": "Tool: Cancelar Cita",
        "position": [
          912,
          848
        ],
        "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
        "typeVersion": 2.2
      },
      {
        "parameters": {
          "content": "# üè• Cl√≠nica Salud Total\n## Sistema de Agendamiento con IA + Cal.com\n\n**Especialistas:**\n- Dr. Garc√≠a ‚Üí Medicina General\n- Dra. L√≥pez ‚Üí Pediatr√≠a\n- Dr. Mart√≠nez ‚Üí Cardiolog√≠a\n\n**Tools (‚Üí Subworkflows):**\nüîç Consultar disponibilidad\nüìÖ Agendar cita\nüëÄ Ver citas\n‚ùå Cancelar cita\n\n> **Configurar antes de usar:**\n> 1. Credenciales OpenAI\n> 2. Credencial Cal.com API Key (Header Auth)\n>    Header Name: `Authorization`\n>    Header Value: `Bearer TU_API_KEY`\n> 3. Crear 3 Event Types en Cal.com\n>    eventTypeId 1 ‚Üí Garc√≠a\n>    eventTypeId 2 ‚Üí L√≥pez\n>    eventTypeId 3 ‚Üí Mart√≠nez",
          "height": 440,
          "width": 320,
          "color": 4
        },
        "id": "sticky-main-1",
        "name": "üè• Cl√≠nica Salud Total",
        "position": [
          -96,
          288
        ],
        "type": "n8n-nodes-base.stickyNote",
        "typeVersion": 1
      },
      {
        "parameters": {
          "content": "## üéØ Prueba el flujo\n\n1. Activa el workflow\n2. Click en **\"Chat\"** (bot√≥n arriba)\n3. Escribe:\n   *\"Hola, quiero una cita con el Dr. Garc√≠a para ma√±ana\"*\n\nüí° El agente pedir√° email y hora, luego agendar√° en Cal.com en tiempo real.",
          "height": 180,
          "width": 280,
          "color": 5
        },
        "id": "sticky-main-2",
        "name": "Sticky Note Demo",
        "position": [
          -96,
          752
        ],
        "type": "n8n-nodes-base.stickyNote",
        "typeVersion": 1
      }
    ],
    "connections": {
      "Chat Trigger": {
        "main": [
          [
            {
              "index": 0,
              "node": "Agente Cl√≠nica",
              "type": "main"
            }
          ]
        ]
      },
      "Memoria Conversacional": {
        "ai_memory": [
          [
            {
              "index": 0,
              "node": "Agente Cl√≠nica",
              "type": "ai_memory"
            }
          ]
        ]
      },
      "OpenAI GPT-4o-mini": {
        "ai_languageModel": [
          [
            {
              "index": 0,
              "node": "Agente Cl√≠nica",
              "type": "ai_languageModel"
            }
          ]
        ]
      },
      "Tool: Agendar Cita": {
        "ai_tool": [
          [
            {
              "index": 0,
              "node": "Agente Cl√≠nica",
              "type": "ai_tool"
            }
          ]
        ]
      },
      "Tool: Cancelar Cita": {
        "ai_tool": [
          [
            {
              "index": 0,
              "node": "Agente Cl√≠nica",
              "type": "ai_tool"
            }
          ]
        ]
      },
      "Tool: Consultar Disponibilidad": {
        "ai_tool": [
          [
            {
              "index": 0,
              "node": "Agente Cl√≠nica",
              "type": "ai_tool"
            }
          ]
        ]
      },
      "Tool: Ver Mis Citas": {
        "ai_tool": [
          [
            {
              "index": 0,
              "node": "Agente Cl√≠nica",
              "type": "ai_tool"
            }
          ]
        ]
      }
    },
    "authors": "Micaela Colmenares",
    "name": null,
    "description": null,
    "autosaved": false
  },
  "tags": [
    {
      "updatedAt": "2026-02-11T14:08:04.189Z",
      "createdAt": "2026-02-11T14:08:04.189Z",
      "id": "ZZDS4bKCWZOINbx2",
      "name": "AGENDAMIENTOS DE CITAS"
    }
  ]
}